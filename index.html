<!DOCTYPE html>
<html>
<head>
  <script src="lib/dsp.js"></script>
  <script src="lib/d3.v2.js"></script>
  <script src="src/audio.js"></script>
  <script src="src/spectrum_analyzer.js"></script>
  <script src="src/spectrum_analyzer_view.js"></script>
  <script src="src/url_audio_source.js"></script>
  <style>
    body { background: #111; padding:0 2em 2em 2em; }
    h1, h2, h3, h4, a, p { color: #ddd; font-family: 'Helvetica Neue', Helvetica, Arial, Geneva, sans-serif; }
    #loader { padding: 3em; }
    #spectrum_analyzer { border: 1px solid #666; height:500px; width:1024px; }
  </style>
</head>

<body>
  <div role="main">
    <h1>Spectrum Analyzer Demo</h1>
    <h4>Using <a href="http://d3js.org">d3.js</a>, HTML5 Web Audio API and <a href="https://github.com/corbanbrook/dsp.js">dsp.js</a>.</h3>
    <div id="spectrum_analyzer">
      <img id="loader" src="images/loader.gif" style="display:none;"/>
    </div>
    <p><input type="button" onclick="audio.toggle();" value="Play/Pause">
      Volume: <input type="range" min="0" max="100" value="100" onchange="audio.setVolume(this);"></p>
    <h2>(<a href="https://github.com/arirusso/d3-audio-spectrum">on github</a>)</h2>
     <script language="javascript">

        var context;
        var model;
        var source;
        var view

        window.onload = function() {

          context = new webkitAudioContext();
          source = new UrlAudioSource(context, "media/04182011.mp3", function() {
            audio = new Audio(context, source);
            model = new SpectrumAnalyzer(audio);
            view = new SpectrumAnalyzerView(model, "#spectrum_analyzer");
            view.update();
          });

        }

      </script>
    </div>
  </body>
</html>
